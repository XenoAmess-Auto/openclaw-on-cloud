# 2026-02-14 工作记录

## 重大教训：修改了错误的组件文件

### 问题
用户报告 Markdown 渲染问题，我反复修改 `ChatView.vue`，但问题一直存在。

### 根本原因
路由配置中 `/chat/:roomId` 使用的是 `HomeView.vue`，不是 `ChatView.vue`！

```typescript
// src/router/index.ts
{
  path: '/chat/:roomId',
  name: 'Chat',
  component: () => import('@/views/HomeView.vue'),  // ← 是 HomeView！
  meta: { requiresAuth: true }
}
```

### 重复犯错
这是我第 N 次犯这个错误。必须建立检查机制。

### 已实施的预防措施

1. **更新 AGENTS.md**：添加"已知的重复错误模式"章节
2. **更新 TOOLS.md**：添加 OOC 项目路由映射备忘
3. **建立强制检查清单**：
   ```bash
   grep -rn "function 函数名" src/views/     # 确认函数定义位置
   grep -rn "v-html.*函数名" src/views/      # 确认模板使用位置
   cat src/router/index.ts                   # 确认路由映射
   ```

### 修复结果
- 将 `ChatView.vue` 的完整 `renderContent` 实现复制到 `HomeView.vue`
- 添加 `marked` 和 `DOMPurify` 导入
- Markdown 渲染现在正常工作

### 提醒
**每次修改 Vue 组件前，必须先确认路由映射！**
